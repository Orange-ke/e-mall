<template>
  <div class="my-promotion">
    <my-promotion-header
      :balance="balance"
      :canWithdrawInFeture="canWithdrawInFeture"
      :totalCommisionWithFeture="totalCommisionWithFeture"
    ></my-promotion-header>
    <div class="withdraw">
      <van-button round type="danger" size="small" class="orange-btn" style="padding-right: 40px;padding-left: 40px; box-shadow: 1px 1px 5px #ddd" @click="linkToWithdraw">立即提现</van-button>
    </div>
    <van-grid :column-num="2" style="padding: 10px 16px;margin-top: 15px;" :border="false" :gutter="10">
      <van-grid-item
        style="height: 100px;"
        v-for="(item,index) in actionList"
        :key="index"
        :text="item.text"
        :to="item.to"
      >
        <div slot="icon" style="display: inline-block; height: 100%; width: 100%; text-align: center">
          <svg t="1562824927899" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13303" width="48" height="48">
            <path :d="item.svg" p-id="13304" fill="#ffd31c"></path>
          </svg>
        </div>
      </van-grid-item>
    </van-grid>
  </div>
</template>

<script>
import { Button, Grid, GridItem } from 'vant'
import MyPromotionHeader from './MyPromotionHeader/MyPromotionHeader'
import axios from 'axios'

export default {
  data () {
    return {
      balance: 0,
      canWithdrawInFeture: 0,
      totalCommisionWithFeture: 0,
      actionList: [
        { text: '推广名片',
          svg: 'M199.143 336.285h137.143v-137.143h-137.143v137.143zM893.428 542h68.572v214.286h-68.572v-68.572h-68.572v-77.142h-68.572v-68.572h68.572v68.572h68.572v-68.572zM687.715 687.715h137.143v137.143h68.572v68.572h68.572v68.572h-137.143v-68.572h-68.572v-137.143h-68.572v68.572h-77.142v68.572h77.142v68.572h-145.714v-420h145.714v68.572h-77.142v145.714h77.142v-68.572zM62 962h411.428v-420h-411.428v420zM130.572 610.571h274.285v282.858h-274.285v-282.858zM199.143 824.857h137.143v-137.143h-137.143v137.143zM542 62v411.428h420v-411.428h-420zM893.428 404.857h-282.858v-274.285h282.858v274.285zM62 473.428h411.428v-411.428h-411.428v411.428zM130.572 130.572h274.285v274.285h-274.285v-274.285zM824.857 199.143h-137.143v137.143h137.143v-137.143z',
          to: '/user-center/my-promotion/poster'
        },
        { text: '佣金明细',
          svg: 'M382.624676 332.504554l279.628612 0c18.858214 0 37.014904-7.981788 49.119297-22.454576 28.857435-34.295747 56.22408-76.398002 62.363917-114.11443 12.367415-75.520797-19.998641-113.851409-113.851409-113.851409s-62.100696 61.574453-98.589356 66.661803c-27.190965 3.771643-26.226219-32.102834-68.942257-66.574063-30.699586-24.647289-65.082874 44.996692-105.606399 45.435195-47.277146 0.613984-113.763668-12.455155-113.763668 68.328273 0 32.629277 28.594413 76.748764 59.820242 113.324966C345.346751 323.908582 363.4155 332.504554 382.624676 332.504554zM731.458767 404.428989c-14.91109-16.928522-36.576201-26.4017-59.118518-26.4017L373.941164 378.027289c-21.577371 0-42.365276 8.683513-57.276566 24.296527C222.89937 500.562411 136.414607 640.815319 136.414607 743.088578c0 90.168866 90.607368 204.020274 202.353604 204.020274l346.465896 0c111.746236 0 202.353604-112.886463 202.353604-204.020274C887.587911 638.973368 818.031471 502.667583 731.458767 404.428989zM640.325156 528.54284l-59.995523 108.851798c-5.262832 9.560718 1.66647 21.314149 12.542896 21.314149l17.016263 0c7.894248 0 14.384847 6.403059 14.384847 14.384847l0 0c0 7.894248-6.403059 14.384847-14.384847 14.384847l-42.803979 0c-8.33275 0-14.998831 6.66628-15.086571 14.998831l0 7.104783c0 7.894248 6.403059 14.384847 14.384847 14.384847l43.505503 0c7.894248 0 14.384847 6.403059 14.384847 14.384847s-6.403059 14.384847-14.384847 14.384847l-43.505503 0c-7.894248 0-14.384847 6.403059-14.384847 14.384847l0 36.576201c0 7.894248-6.403059 14.384847-14.384847 14.384847l-26.050738 0c-7.894248 0-14.384847-6.403059-14.384847-14.384847l0-36.576201c0-7.894248-6.403059-14.384847-14.384847-14.384847l-43.067001 0c-7.894248 0-14.384847-6.403059-14.384847-14.384847s6.403059-14.384847 14.384847-14.384847l42.97926 0c7.981988 0 14.385047-6.403059 14.472588-14.384847l0.087741-7.017042c0.087741-8.33275-6.66628-15.174312-15.086571-15.174312l-42.453017 0c-7.894248 0-14.384847-6.403059-14.384847-14.384847l0 0c0-7.894248 6.403059-14.384847 14.384847-14.384847l16.57776 0c10.964166 0 17.805728-11.753431 12.542896-21.314149l-59.995723-108.851599c-5.262832-9.560718 1.66647-21.314349 12.542896-21.314349l28.594413 0c5.438113 0 10.437923 3.069919 12.806117 7.894248l48.856076 97.44893c5.262832 10.525464 20.349403 10.525464 25.699975 0l48.856076-97.44893c2.455935-4.824129 7.367805-7.894248 12.806117-7.894248l28.594413 0C638.658486 507.316232 645.587987 518.982122 640.325156 528.54284z',
          to: '/user-center/my-promotion/commission-record'
        },
        { text: '我的好友',
          svg: 'M780 140.6c-7-4.8-16.8-2.7-21.3 4.5L557.5 460.3c-6.4 10.1 0.8 23.3 12.8 23.3h374.6c8.5 0 15.6-7 15.2-15.5-4.9-135.8-75.1-255-180.1-327.5zM884.1 514H537.2c-24 0-38.5-26.4-25.6-46.6l186.3-291.9c4.6-7.2 2.5-16.9-4.9-21.2-72.8-42.7-159.4-64-251.8-55.3C247.3 117.3 89.5 271 66.9 464.1c-29.5 252.5 167.6 467 414.9 467 225.4 0 409.3-178.4 417.5-401.4 0.4-8.7-6.7-15.7-15.2-15.7z',
          to: '/user-center/my-promotion/promoter-list'
        },
        { text: '我的客户',
          svg: 'M603.792613 68.64952 409.943626 68.64952c-23.77652 0-42.785455 21.154809-42.785455 47.303352 0 26.208918 19.043728 47.426149 42.785455 47.426149l195.048301 0c22.580275 0 41.617863-21.217231 41.617863-47.426149C646.614907 89.803305 627.599831 68.64952 603.792613 68.64952L603.792613 68.64952 603.792613 68.64952zM814.280558 100.221586l-96.531544 0c0.981351 5.183046 1.548262 10.425444 1.548262 15.731286 0.029676 39.817867-28.855188 79.006402-63.21474 79.006402L359.51919 194.959274c-36.160571 0-65.084321-39.188534-65.084321-79.006402 0.034792-5.305843 0.601704-10.54824 1.583055-15.731286l-97.698113 0c-78.533634 0-97.828073 44.523029-97.828073 108.750843l0 636.20993c0 68.995397 27.629267 107.61088 103.758132 107.61088l604.094488 0c76.129888 0 113.137757-30.27656 113.137757-107.576087L921.482115 208.971405c0.00614-64.221674-34.641985-108.744703-107.200534-108.744703l0 0L814.281581 100.221586zM715.102744 728.380142 295.321052 728.380142c-15.47239 0-30.918173-18.980283-30.918173-34.477232 0-15.44476 13.072737-28.675086 28.54615-28.675086l418.5834 0c15.468296 0 28.54001 12.025894 29.713742 28.675086C741.246171 709.404975 730.571041 728.380142 715.102744 728.380142L715.102744 728.380142 715.102744 728.380142zM716.808596 559.925522 297.021787 559.925522c-15.474436 0-25.326828-16.636912-25.326828-32.145118 0-15.503089 13.078877-31.007201 28.54615-31.007201l418.5834 0c15.474436 0 28.54615 14.364149 29.713742 31.007201C748.539274 543.283494 732.24824 559.925522 716.808596 559.925522L716.808596 559.925522 716.808596 559.925522zM716.808596 386.915144 297.021787 386.915144c-15.474436 0-25.326828-16.643052-25.326828-32.145118 0-15.504112 13.078877-31.007201 28.54615-31.007201l418.5834 0c15.474436 0 28.54615 14.370289 29.713742 31.007201C748.539274 370.272092 732.24824 386.915144 716.808596 386.915144L716.808596 386.915144 716.808596 386.915144zM716.808596 386.915144',
          to: '/user-center/my-promotion/promoter-orders'
        }
      ]
    }
  },
  mounted: function () {
    axios
      .get('/api/Withdraw/getCommisionInfo')
      .then(res => {
        console.log(res)
        if (res.data.code === 200) {
          this.balance = Number(res.data.data.balance)
          this.canWithdrawInFeture = Number(res.data.data.canWithdrawInFeture)
          this.totalCommisionWithFeture = Number(res.data.data.totalCommisionWithFeture)
        } else {
          this.$toast.fail('请求错误')
        }
      })
      .catch(error => {
        console.log(error)
        this.$toast.fail('请求错误')
      })
  },
  methods: {
    linkToWithdraw: function () {
      this.$router.push('/user-center/my-promotion/to-withdraw')
    }
  },
  components: {
    'van-button': Button,
    'my-promotion-header': MyPromotionHeader,
    'van-grid': Grid,
    'van-grid-item': GridItem
  }
}
</script>

<style scoped>
  .withdraw {
    text-align: center;
    position: absolute;
    left: 0;
    right: 0;
    top: 185px;
    color: #ffd31c;
  }
</style>
